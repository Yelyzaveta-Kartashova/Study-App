<div class="flex items-start gap-2 <%= 'justify-end flex-row-reverse' if comment.user == current_user %>">
  <div class="relative p-3 rounded-lg max-w-md text-sm shadow-md
              <%= comment.user == current_user ? 'bg-white text-black' : 'bg-green-100 text-gray-900' %>">
    
    <p class="mb-1"><%= comment.content %></p>

    <div class="text-xs text-gray-600 dark:text-gray-400 mt-1">
      <%= comment.user ? comment.user.name : "User" %> Â· 
      <%= comment.created_at.present? ? "#{time_ago_in_words(comment.created_at)} ago" : "Unknown time ago" %>
    </div>

    <% if comment.user && comment.user.id == current_user.id %>
      <%= button_to subject_topic_lesson_comment_path(@subject, @topic, @lesson, comment), 
                    method: :delete, 
                    data: { turbo_confirm: "Are you sure you want to delete this comment?" },
                    class: "absolute top-1 right-2 text-black opacity-60 hover:opacity-100" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      <% end %>
    <% end %>
  </div>
</div>
